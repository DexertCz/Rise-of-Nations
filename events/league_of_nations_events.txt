add_namespace = league_of_nations_events

# League of Nations is created at start
country_event = {
	id = league_of_nations_events.1
	title = league_of_nations_events.EVTNAME1
	desc = league_of_nations_events.EVTDESC1
	picture = GFX_lon_event_picture
	
	hidden = yes
	fire_only_once = yes
	is_triggered_only = yes
	
	trigger = {
		NOT = { has_global_flag = league_of_nations_created }
	}
	
	immediate = {
		hidden_effect = {
			create_league_of_nations_effect = yes
			# Focus Array:
			add_to_array = { global.league_of_nations_focuses_array = 0 }
			add_to_array = { global.league_of_nations_focuses_array = 1 }
			add_to_array = { global.league_of_nations_focuses_array = 0 }
			add_to_array = { global.league_of_nations_focuses_array = 2 }
			add_to_array = { global.league_of_nations_focuses_array = 0 }
			add_to_array = { global.league_of_nations_focuses_array = 3 }
			add_to_array = { global.league_of_nations_focuses_array = 4 }
			add_to_array = { global.league_of_nations_focuses_array = 0 }
			add_to_array = { global.league_of_nations_focuses_array = 5 }
			add_to_array = { global.league_of_nations_focuses_array = 0 }
			add_to_array = { global.league_of_nations_focuses_array = 6 }
			add_to_array = { global.league_of_nations_focuses_array = 0 }
			add_to_array = { global.league_of_nations_focuses_array = 7 }
			add_to_array = { global.league_of_nations_focuses_array = 0 }
			add_to_array = { global.league_of_nations_focuses_array = 8 }
		}
	}
	
	option = {
		name = league_of_nations_events1.EVTOPT1
		
		ai_chance = { factor = 100 }
	}
}

# Target of League of Nations Voting is selected
country_event = {
	id = league_of_nations_events.2
	title = league_of_nations_events.EVTNAME2
	desc = league_of_nations_events.EVTDESC2
	picture = GFX_lon_event_picture
	
	hidden = yes
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			set_variable = { global.league_of_nations_voting_time = 62 }
			set_global_flag = league_of_nations_voting
			set_country_flag = target_of_league_of_nations_voting
			save_global_event_target_as = target_of_league_of_nations_voting
			FROM = {
				save_global_event_target_as = started_league_of_nations_voting
			}
			every_country = {
				limit = {
					has_country_flag = member_of_league_of_nations
				}
				set_variable = { show_league_of_nations_new_voting_alert = 1 }
				set_variable = { league_of_nations_neutrality_random_chance_in_voting = 0 }
				if = {
					limit = {
						has_government = neutrality
					}
					set_variable = { LoN_random_chance_var = random }
					if = {
						limit = {
							NOT = { check_variable = { LoN_random_chance_var > 0.14 } }
						}
						set_variable = { league_of_nations_neutrality_random_chance_in_voting = 1 } # YES factor +5
					}
					else_if = {
						limit = {
							NOT = { check_variable = { LoN_random_chance_var > 0.28 } }
						}
						set_variable = { league_of_nations_neutrality_random_chance_in_voting = 2 } # YES factor +10
					}
					else_if = {
						limit = {
							NOT = { check_variable = { LoN_random_chance_var > 0.42 } }
						}
						set_variable = { league_of_nations_neutrality_random_chance_in_voting = 3 } # YES factor +20
					}
					else_if = {
						limit = {
							NOT = { check_variable = { LoN_random_chance_var > 0.56 } }
						}
						set_variable = { league_of_nations_neutrality_random_chance_in_voting = 4 } # NO factor +5
					}
					else_if = {
						limit = {
							NOT = { check_variable = { LoN_random_chance_var > 0.7 } }
						}
						set_variable = { league_of_nations_neutrality_random_chance_in_voting = 5 } # NO factor +10
					}
					else_if = {
						limit = {
							NOT = { check_variable = { LoN_random_chance_var > 0.84 } }
						}
						set_variable = { league_of_nations_neutrality_random_chance_in_voting = 6 } # NO factor +20
					}
					else_if = {
						limit = {
							always = yes
						}
						set_variable = { league_of_nations_neutrality_random_chance_in_voting = 0 } # No additional factor
					}
					clear_variable = LoN_random_chance_var
				}
			}
			if = {
				limit = {
					NOT = { has_global_flag = ITA_ETH_voting }
					NOT = { has_global_flag = SOV_FIN_voting }
					NOT = { has_global_flag = GER_anschluss_voting }
					has_country_flag = last_league_of_nations_threat_static_change
					has_country_flag = {
						flag = last_league_of_nations_threat_static_change
						days < 31
					}
					OR = {
						check_variable = { last_league_of_nations_threat_static_change = 2 }
						check_variable = { last_league_of_nations_threat_static_change = 8 }
						check_variable = { last_league_of_nations_threat_static_change = 12 }
					}
				}
				if = {
					limit = {
						check_variable = { last_league_of_nations_threat_static_change = 2 }
					}
					set_global_flag = league_of_nations_country_annexation_voting
				}
				else_if = {
					limit = {
						OR = {
							check_variable = { last_league_of_nations_threat_static_change = 8 }
							check_variable = { last_league_of_nations_threat_static_change = 12 }
						}
					}
					set_global_flag = league_of_nations_state_annexation_voting
					every_owned_state = {
						limit = {
							has_state_flag = annexed_by_@ROOT
							has_state_flag = {
								flag = annexed_by_@ROOT
								days < 31
							}
						}
						set_state_flag = states_to_give_back
					}
				}
			}
			if = {
				limit = {
					has_global_flag = league_of_nations_map_mode_active
				}
				FROM = {
					save_cosmetic_tag_before_league_of_nations_map_mode = yes
					set_cosmetic_tag = LEAGUE_OF_NATIONS_STARTER_OF_VOTING_CT
				}
				save_cosmetic_tag_before_league_of_nations_map_mode = yes
				if = {
					limit = {
						has_country_flag = member_of_league_of_nations
					}
					set_cosmetic_tag = LEAGUE_OF_NATIONS_TARGET_OF_VOTING_CT_MEMBER_CT
				}
				else_if = {
					limit = {
						always = yes
					}
					set_cosmetic_tag = LEAGUE_OF_NATIONS_TARGET_OF_VOTING_CT
				}
			}
		}
	}
	
	option = {
		name = league_of_nations_events2.EVTOPT1
		
		ai_chance = { factor = 100 }
	}
}

# Left League of Nations
country_event = {
	id = league_of_nations_events.3
	title = league_of_nations_events.EVTNAME3
	desc = league_of_nations_events.EVTDESC3
	picture = GFX_lon_event_picture
	
	hidden = yes
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			leave_league_of_nations_effect = yes
		}
	}
	
	option = {
		name = league_of_nations_events3.EVTOPT1
		
		ai_chance = { factor = 100 }
	}
}

# League of Nations Voting ended
country_event = {
	id = league_of_nations_events.4
	title = league_of_nations_events.EVTNAME4
	desc = league_of_nations_events.EVTDESC4
	picture = GFX_lon_event_picture
	
	is_triggered_only = yes	
	
	immediate = {
		hidden_effect = {
			set_variable = { global.time_til_next_possible_league_of_nations_voting = 31 }
			if = {
				limit = {
					event_target:target_of_league_of_nations_voting = {
						exists = yes
					}
					set_temp_variable = { num_of_yes_votes_in_league_of_nations_voting_temp_var = global.num_of_yes_votes_in_league_of_nations_voting }
					set_temp_variable = { num_of_total_votes_in_league_of_nations_voting_temp_var = global.num_of_no_votes_in_league_of_nations_voting }
					add_to_temp_variable = { num_of_total_votes_in_league_of_nations_voting_temp_var = global.num_of_yes_votes_in_league_of_nations_voting }
					multiply_temp_variable = { num_of_total_votes_in_league_of_nations_voting_temp_var = 0.66 }
					NOT = { check_variable = { num_of_yes_votes_in_league_of_nations_voting_temp_var < num_of_total_votes_in_league_of_nations_voting_temp_var } }
				}
				set_global_flag = league_of_nations_voting_successful
				if = {
					limit = {
						check_variable = { global.num_of_war_votes_in_league_of_nations_voting > 0 }
						NOT = { check_variable = { global.num_of_war_votes_in_league_of_nations_voting < global.num_of_trade_sanction_votes_in_league_of_nations_voting } }
						NOT = { check_variable = { global.num_of_war_votes_in_league_of_nations_voting < global.num_of_kick_out_of_league_of_nations_votes_in_league_of_nations_voting } }
						NOT = { check_variable = { global.num_of_war_votes_in_league_of_nations_voting < global.num_of_form_coalition_votes_in_league_of_nations_voting } }
					}
					set_global_flag = league_of_nations_voting_successful_type_war
					every_country = {
						limit = {
							has_country_flag = member_of_league_of_nations
						}
						event_target:target_of_league_of_nations_voting = {
							if = {
								limit = {
									NOT = { has_global_flag = GER_anschluss_voting }
									NOT = { has_global_flag = ITA_ETH_voting }
									NOT = { has_global_flag = league_of_nations_country_annexation_voting }
									NOT = { has_global_flag = league_of_nations_state_annexation_voting }
								}
								PREV = {
									create_wargoal = {
										type = liberate_wargoal
										target = PREV
									}
								}
							}
							else_if = {
								limit = {
									has_global_flag = GER_anschluss_voting
								}
								set_country_flag = GER_anschluss_voting_war
							}
							else_if = {
								limit = {
									has_global_flag = ITA_ETH_voting
								}
								set_country_flag = ITA_ETH_voting_war
							}
							else_if = {
								limit = {
									OR = {
										has_global_flag = league_of_nations_country_annexation_voting
										has_global_flag = league_of_nations_state_annexation_voting
									}
								}
								set_country_flag = league_of_nations_voting_war
							}
						}
					}
				}
				else_if = {
					limit = {
						check_variable = { global.num_of_kick_out_of_league_of_nations_votes_in_league_of_nations_voting > 0 }
						NOT = { check_variable = { global.num_of_kick_out_of_league_of_nations_votes_in_league_of_nations_voting < global.num_of_trade_sanction_votes_in_league_of_nations_voting } }
						NOT = { check_variable = { global.num_of_kick_out_of_league_of_nations_votes_in_league_of_nations_voting < global.num_of_war_votes_in_league_of_nations_voting } }
						NOT = { check_variable = { global.num_of_kick_out_of_league_of_nations_votes_in_league_of_nations_voting < global.num_of_form_coalition_votes_in_league_of_nations_voting } }
					}
					set_global_flag = league_of_nations_voting_successful_type_kick
					event_target:target_of_league_of_nations_voting = {
						if = {
							limit = {
								NOT = { has_global_flag = GER_anschluss_voting }
								NOT = { has_global_flag = ITA_ETH_voting }
								NOT = { has_global_flag = league_of_nations_country_annexation_voting }
								NOT = { has_global_flag = league_of_nations_state_annexation_voting }
							}
							country_event = { id = league_of_nations_events.3 }
						}
						else_if = {
							limit = {
								has_global_flag = GER_anschluss_voting
							}
							set_country_flag = GER_anschluss_voting_kick
						}
						else_if = {
							limit = {
								has_global_flag = ITA_ETH_voting
							}
							set_country_flag = ITA_ETH_voting_kick
						}
						else_if = {
							limit = {
								OR = {
									has_global_flag = league_of_nations_country_annexation_voting
									has_global_flag = league_of_nations_state_annexation_voting
								}
							}
							set_country_flag = league_of_nations_voting_kick
						}
					}
				}
				else_if = {
					limit = {
						check_variable = { global.num_of_form_coalition_votes_in_league_of_nations_voting > 0 }
						NOT = { check_variable = { global.num_of_form_coalition_votes_in_league_of_nations_voting < global.num_of_trade_sanction_votes_in_league_of_nations_voting } }
						NOT = { check_variable = { global.num_of_form_coalition_votes_in_league_of_nations_voting < global.num_of_war_votes_in_league_of_nations_voting } }
						NOT = { check_variable = { global.num_of_form_coalition_votes_in_league_of_nations_voting < global.num_of_kick_out_of_league_of_nations_votes_in_league_of_nations_voting } }
					}
					set_global_flag = league_of_nations_voting_successful_type_coalition
					event_target:target_of_league_of_nations_voting = {
						add_timed_idea = {
							idea = league_of_nations_defense_pact_target
							days = 182
						}
					}
				}
				else_if = {
					limit = {
						OR = {
							AND = {
								NOT = { check_variable = { global.num_of_trade_sanction_votes_in_league_of_nations_voting < global.num_of_kick_out_of_league_of_nations_votes_in_league_of_nations_voting } }
								NOT = { check_variable = { global.num_of_trade_sanction_votes_in_league_of_nations_voting < global.num_of_war_votes_in_league_of_nations_voting } }
								NOT = { check_variable = { global.num_of_trade_sanction_votes_in_league_of_nations_voting < global.num_of_form_coalition_votes_in_league_of_nations_voting } }
							}
							AND = {
								NOT = { check_variable = { global.num_of_war_votes_in_league_of_nations_voting > 0 } }
								NOT = { check_variable = { global.num_of_kick_out_of_league_of_nations_votes_in_league_of_nations_voting > 0 } }
								NOT = { check_variable = { global.num_of_form_coalition_votes_in_league_of_nations_voting > 0 } }
							}
						}
					}
					set_global_flag = league_of_nations_voting_successful_type_trade
					event_target:target_of_league_of_nations_voting = {
						if = {
							limit = {
								NOT = { has_global_flag = GER_anschluss_voting }
								NOT = { has_global_flag = ITA_ETH_voting }
								NOT = { has_global_flag = league_of_nations_country_annexation_voting }
								NOT = { has_global_flag = league_of_nations_state_annexation_voting }
							}
							if = {
								limit = {
									check_variable = { num_of_active_league_of_nations_trade_sanctions < 1 }
								}
								add_to_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
								set_variable = { duration_of_1_league_of_nations_trade_sanction = 1095 }
								every_country = {
									limit = {
										has_country_flag = member_of_league_of_nations
										NOT = { tag = PREV }
									}
									add_opinion_modifier = {
										target = PREV
										modifier = league_of_nations_trade_sanction_modifier_1
									}
								}
							}
							else_if = {
								limit = {
									check_variable = { num_of_active_league_of_nations_trade_sanctions < 2 }
								}
								add_to_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
								set_variable = { duration_of_2_league_of_nations_trade_sanction = 1095 }
								every_country = {
									limit = {
										has_country_flag = member_of_league_of_nations
										NOT = { tag = PREV }
									}
									add_opinion_modifier = {
										target = PREV
										modifier = league_of_nations_trade_sanction_modifier_2
									}
								}
							}
							else_if = {
								limit = {
									check_variable = { num_of_active_league_of_nations_trade_sanctions < 3 }
								}
								add_to_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
								set_variable = { duration_of_3_league_of_nations_trade_sanction = 1095 }
								every_country = {
									limit = {
										has_country_flag = member_of_league_of_nations
										NOT = { tag = PREV }
									}
									add_opinion_modifier = {
										target = PREV
										modifier = league_of_nations_trade_sanction_modifier_3
									}
								}
							}
							else_if = {
								limit = {
									check_variable = { num_of_active_league_of_nations_trade_sanctions < 4 }
								}
								add_to_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
								set_variable = { duration_of_4_league_of_nations_trade_sanction = 1095 }
								every_country = {
									limit = {
										has_country_flag = member_of_league_of_nations
										NOT = { tag = PREV }
									}
									add_opinion_modifier = {
										target = PREV
										modifier = league_of_nations_trade_sanction_modifier_4
									}
								}
							}
							else_if = {
								limit = {
									check_variable = { num_of_active_league_of_nations_trade_sanctions < 5 }
								}
								add_to_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
								set_variable = { duration_of_5_league_of_nations_trade_sanction = 1095 }
								every_country = {
									limit = {
										has_country_flag = member_of_league_of_nations
										NOT = { tag = PREV }
									}
									add_opinion_modifier = {
										target = PREV
										modifier = league_of_nations_trade_sanction_modifier_5
									}
								}
							}
							else_if = {
								limit = {
									check_variable = { num_of_active_league_of_nations_trade_sanctions < 6 }
								}
								add_to_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
								set_variable = { duration_of_6_league_of_nations_trade_sanction = 1095 }
								every_country = {
									limit = {
										has_country_flag = member_of_league_of_nations
										NOT = { tag = PREV }
									}
									add_opinion_modifier = {
										target = PREV
										modifier = league_of_nations_trade_sanction_modifier_6
									}
								}
							}
							else_if = {
								limit = {
									check_variable = { num_of_active_league_of_nations_trade_sanctions < 7 }
								}
								add_to_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
								set_variable = { duration_of_7_league_of_nations_trade_sanction = 1095 }
								every_country = {
									limit = {
										has_country_flag = member_of_league_of_nations
										NOT = { tag = PREV }
									}
									add_opinion_modifier = {
										target = PREV
										modifier = league_of_nations_trade_sanction_modifier_7
									}
								}
							}
							else_if = {
								limit = {
									check_variable = { num_of_active_league_of_nations_trade_sanctions < 8 }
								}
								add_to_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
								set_variable = { duration_of_8_league_of_nations_trade_sanction = 1095 }
								every_country = {
									limit = {
										has_country_flag = member_of_league_of_nations
										NOT = { tag = PREV }
									}
									add_opinion_modifier = {
										target = PREV
										modifier = league_of_nations_trade_sanction_modifier_8
									}
								}
							}
							else_if = {
								limit = {
									check_variable = { num_of_active_league_of_nations_trade_sanctions < 9 }
								}
								add_to_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
								set_variable = { duration_of_9_league_of_nations_trade_sanction = 1095 }
								every_country = {
									limit = {
										has_country_flag = member_of_league_of_nations
										NOT = { tag = PREV }
									}
									add_opinion_modifier = {
										target = PREV
										modifier = league_of_nations_trade_sanction_modifier_9
									}
								}
							}
							else_if = {
								limit = {
									check_variable = { num_of_active_league_of_nations_trade_sanctions < 10 }
								}
								add_to_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
								set_variable = { duration_of_10_league_of_nations_trade_sanction = 1095 }
								every_country = {
									limit = {
										has_country_flag = member_of_league_of_nations
										NOT = { tag = PREV }
									}
									add_opinion_modifier = {
										target = PREV
										modifier = league_of_nations_trade_sanction_modifier_10
									}
								}
							}
						}
						else_if = {
							limit = {
								has_global_flag = GER_anschluss_voting
							}
							set_country_flag = GER_anschluss_voting_trade
						}
						else_if = {
							limit = {
								has_global_flag = ITA_ETH_voting
							}
							set_country_flag = ITA_ETH_voting_trade
						}
						else_if = {
							limit = {
								OR = {
									has_global_flag = league_of_nations_country_annexation_voting
									has_global_flag = league_of_nations_state_annexation_voting
								}
							}
							set_country_flag = league_of_nations_voting_trade
						}
					}
				}
				event_target:target_of_league_of_nations_voting = {
					set_variable = { cooldown_for_league_of_nations_voting = 100 }
				}
			}
			else_if = {
				limit = {
					always = yes
				}
				set_global_flag = league_of_nations_voting_failed
				event_target:target_of_league_of_nations_voting = {
					set_variable = { cooldown_for_league_of_nations_voting = 50 }
				}
				clr_global_flag = GER_anschluss_voting
				clr_global_flag = ITA_ETH_voting
				clr_global_flag = SOV_FIN_voting
				clr_global_flag = league_of_nations_country_annexation_voting
				clr_global_flag = league_of_nations_state_annexation_voting
			}
			
			if = {
				limit = {
					OR = {
						NOT = { has_global_flag = GER_anschluss_voting }
						NOT = { country_exists = GER }
					}
					OR = {
						NOT = { has_global_flag = ITA_ETH_voting }
						NOT = { country_exists = ITA }
					}
					NOT = { has_global_flag = league_of_nations_country_annexation_voting }
					NOT = { has_global_flag = league_of_nations_state_annexation_voting }
				}
				event_target:target_of_league_of_nations_voting = {
					set_temp_variable = { league_of_nations_threat_from_voting_temp = -7 }
					add_to_variable = { league_of_nations_generated_threat = league_of_nations_threat_from_voting_temp }
					clr_country_flag = last_league_of_nations_threat_static_change
					set_country_flag = last_league_of_nations_threat_static_change
					set_variable = { last_league_of_nations_threat_static_change = 10 }
					sort_array_high_to_low_global_threat_countries_array = yes
				}
				every_country = {
					clr_country_flag = league_of_nations_voted_sanction_type_trade
					clr_country_flag = league_of_nations_voted_sanction_type_war
					clr_country_flag = league_of_nations_voted_sanction_type_kick_out_of_league_of_nations
					clr_country_flag = league_of_nations_voted_sanction_type_form_coalition
					clr_country_flag = league_of_nations_voting_successful_type_coalition
					clr_country_flag = league_of_nations_voted_yes
					clr_country_flag = league_of_nations_voted_no
					clr_country_flag = target_of_league_of_nations_voting
					clr_country_flag = started_league_of_nations_voting
				}
				
				set_variable = { global.num_of_yes_votes_in_league_of_nations_voting = 0 }
				set_variable = { global.num_of_no_votes_in_league_of_nations_voting = 0 }
				set_variable = { global.num_of_trade_sanction_votes_in_league_of_nations_voting = 0 }
				set_variable = { global.num_of_war_votes_in_league_of_nations_voting = 0 }
				set_variable = { global.num_of_kick_out_of_league_of_nations_votes_in_league_of_nations_voting = 0 }
				set_variable = { global.num_of_form_coalition_votes_in_league_of_nations_voting = 0 }
				set_variable = { global.league_of_nations_voting_time = 0 }
				
				clr_global_flag = league_of_nations_voting
				clr_global_flag = ITA_ETH_voting
				clr_global_flag = SOV_FIN_voting
				clr_global_flag = GER_anschluss_voting
				clr_global_flag = league_of_nations_country_annexation_voting
				clr_global_flag = league_of_nations_state_annexation_voting
			}
			else_if = {
				limit = {
					has_global_flag = GER_anschluss_voting
					country_exists = GER
				}
				GER = {
					set_temp_variable = { league_of_nations_threat_from_voting_temp = -7 }
					add_to_variable = { league_of_nations_generated_threat = league_of_nations_threat_from_voting_temp }
					clr_country_flag = last_league_of_nations_threat_static_change
					set_country_flag = last_league_of_nations_threat_static_change
					set_variable = { last_league_of_nations_threat_static_change = 10 }
					sort_array_high_to_low_global_threat_countries_array = yes
					
					if = {
						limit = {
							check_variable = { league_of_nations_generated_threat > 100 }
						}
						set_variable = { league_of_nations_generated_threat = 100 }
					}
					if = {
						limit = {
							check_variable = { league_of_nations_generated_threat < 0 }
						}
						set_variable = { league_of_nations_generated_threat = 0 }
					}
					set_global_flag = GER_can_accept_refuse_ultimatum
				}
			}
			else_if = {
				limit = {
					has_global_flag = ITA_ETH_voting
					country_exists = ITA
				}
				ITA = {
					set_temp_variable = { league_of_nations_threat_from_voting_temp = -7 }
					add_to_variable = { league_of_nations_generated_threat = league_of_nations_threat_from_voting_temp }
					clr_country_flag = last_league_of_nations_threat_static_change
					set_country_flag = last_league_of_nations_threat_static_change
					set_variable = { last_league_of_nations_threat_static_change = 10 }
					sort_array_high_to_low_global_threat_countries_array = yes
					
					if = {
						limit = {
							check_variable = { league_of_nations_generated_threat > 100 }
						}
						set_variable = { league_of_nations_generated_threat = 100 }
					}
					if = {
						limit = {
							check_variable = { league_of_nations_generated_threat < 0 }
						}
						set_variable = { league_of_nations_generated_threat = 0 }
					}
					set_global_flag = ITA_can_accept_refuse_ultimatum
				}
			}
			else_if = {
				limit = {
					OR = {
						has_global_flag = league_of_nations_country_annexation_voting
						has_global_flag = league_of_nations_state_annexation_voting
					}
				}
				event_target:target_of_league_of_nations_voting = {
					set_temp_variable = { league_of_nations_threat_from_voting_temp = -7 }
					add_to_variable = { league_of_nations_generated_threat = league_of_nations_threat_from_voting_temp }
					clr_country_flag = last_league_of_nations_threat_static_change
					set_country_flag = last_league_of_nations_threat_static_change
					set_variable = { last_league_of_nations_threat_static_change = 10 }
					sort_array_high_to_low_global_threat_countries_array = yes
					
					if = {
						limit = {
							check_variable = { league_of_nations_generated_threat > 100 }
						}
						set_variable = { league_of_nations_generated_threat = 100 }
					}
					if = {
						limit = {
							check_variable = { league_of_nations_generated_threat < 0 }
						}
						set_variable = { league_of_nations_generated_threat = 0 }
					}
					set_global_flag = target_can_accept_refuse_ultimatum
				}
			}
		}
	}
	
	option = {
		name = league_of_nations_events4.EVTOPT1
		
		trigger = {
			has_global_flag = league_of_nations_voting_successful
		}
		
		ai_chance = { factor = 100 }
		
		if = {
			limit = {
				has_global_flag = league_of_nations_voting_successful_type_war
			}
			custom_effect_tooltip = ALL_LEAGUE_OF_NATIONS_GAIN_WARGOAL_AGAINST_TARGET
			event_target:target_of_league_of_nations_voting = {
				news_event = { id = league_of_nations_news_events.1 }
			}
		}
		if = {
			limit = {
				has_global_flag = league_of_nations_voting_successful_type_kick
			}
			custom_effect_tooltip = TARGET_IS_KICKED_OUT_OF_LEAGUE_OF_NATIONS
			event_target:target_of_league_of_nations_voting = {
				news_event = { id = league_of_nations_news_events.2 }
			}
		}
		if = {
			limit = {
				has_global_flag = league_of_nations_voting_successful_type_trade
			}
			custom_effect_tooltip = ALL_LEAGUE_OF_NATIONS_MAKE_TRADE_SANCTIONS_AGAINST_TARGET
			event_target:target_of_league_of_nations_voting = {
				news_event = { id = league_of_nations_news_events.3 }
				
				custom_effect_tooltip = THIS_LOOSES_7_AGGRESSIVENESS
			}
		}
		if = {
			limit = {
				has_global_flag = league_of_nations_voting_successful_type_coalition
			}
			event_target:target_of_league_of_nations_voting = {
				custom_effect_tooltip = ALL_LEAGUE_OF_NATIONS_FORM_COALITION_AGAINST_THIS
				news_event = { id = league_of_nations_news_events.22 }
			}
		}
		
		if = {
			limit = {
				has_global_flag = GER_can_accept_refuse_ultimatum
			}
			GER = {
				country_event = { id = league_of_nations_events.18 }
			}
		}
		else_if = {
			limit = {
				has_global_flag = ITA_can_accept_refuse_ultimatum
			}
			ITA = {
				country_event = { id = league_of_nations_events.23 }
			}
		}
		else_if = {
			limit = {
				has_global_flag = target_can_accept_refuse_ultimatum
			}
			event_target:target_of_league_of_nations_voting = {
				country_event = { id = league_of_nations_events.21 }
			}
		}
		
		hidden_effect = {
			clr_global_flag = GER_can_accept_refuse_ultimatum
			clr_global_flag = ITA_can_accept_refuse_ultimatum
			clr_global_flag = target_can_accept_refuse_ultimatum
			clr_global_flag = league_of_nations_voting_successful
			clr_global_flag = league_of_nations_voting_failed
			clr_global_flag = league_of_nations_voting_successful_type_war
			clr_global_flag = league_of_nations_voting_successful_type_kick
			clr_global_flag = league_of_nations_voting_successful_type_trade
			clr_global_flag = league_of_nations_voting_successful_type_coalition
			clear_global_event_target = target_of_league_of_nations_voting
			clear_global_event_target = started_league_of_nations_voting
			add_to_variable = { global.num_of_total_successful_league_of_nations_votings = 1 }
		}
	}
	
	option = {
		name = league_of_nations_events4.EVTOPT2
		
		trigger = {
			has_global_flag = league_of_nations_voting_failed
		}
		
		ai_chance = { factor = 100 }
		
		custom_effect_tooltip = LEAGUE_OF_NATIONS_VOTING_WAS_UNSUCCESSFUL
		event_target:target_of_league_of_nations_voting = {
			news_event = { id = league_of_nations_news_events.4 }
			hidden_effect = {
				add_to_variable = { num_of_failed_league_of_nations_votings_against_us = 1 }
				if = {
					limit = {
						NOT = { check_variable = { num_of_failed_league_of_nations_votings_against_us_cooldown > 0 } }
					}
					set_variable = { num_of_failed_league_of_nations_votings_against_us_cooldown = 365 }
				}
			}
		}
		
		hidden_effect = {
			clr_global_flag = league_of_nations_voting_successful
			clr_global_flag = league_of_nations_voting_failed
			clr_global_flag = league_of_nations_voting_successful_type_war
			clr_global_flag = league_of_nations_voting_successful_type_kick
			clr_global_flag = league_of_nations_voting_successful_type_trade
			clr_global_flag = league_of_nations_voting_successful_type_coalition
			clear_global_event_target = target_of_league_of_nations_voting
			clear_global_event_target = started_league_of_nations_voting
		}
	}
}

# Election of League of Nations
country_event = {
	id = league_of_nations_events.5
	title = league_of_nations_events.EVTNAME5
	desc = league_of_nations_events.EVTDESC5
	picture = GFX_lon_event_picture
	
	hidden = yes
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			set_global_flag = league_of_nations_election
			random_country = {
				limit = {
					has_country_flag = member_of_league_of_nations
					NOT = {
						any_other_country = {
							has_country_flag = member_of_league_of_nations
							check_variable = { num_of_votes_for_lon_election > PREV.num_of_votes_for_lon_election }
						}
					}
				}
				set_country_flag = won_league_of_nations_election
			}
			country_event = { id = league_of_nations_events.9 }
		}
	}
	
	option = {
		name = league_of_nations_events5.EVTOPT1
		
		ai_chance = { factor = 100 }
	}
}

# events 6-8 deleted

# Election ended
country_event = {
	id = league_of_nations_events.9
	title = league_of_nations_events.EVTNAME9
	desc = league_of_nations_events.EVTDESC9
	picture = GFX_lon_event_picture
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			if = {
				limit = {
					NOT = {
						any_country = {
							has_country_flag = won_league_of_nations_election
						}
					}
				}
				set_country_flag = won_league_of_nations_election
			}
			set_variable = { global.num_of_league_of_nations_noconfidence_votes = 0 }
			every_country = {
				limit = {
					has_country_flag = voted_in_noconfidence_vote
				}
				clr_country_flag = voted_in_noconfidence_vote
			}
		}
	}
	
	option = {
		name = league_of_nations_events9.EVTOPT1
		
		ai_chance = { factor = 100 }
		
		every_country = {
			limit = {
				has_country_flag = won_league_of_nations_election
			}
			custom_effect_tooltip = THIS_IS_NEW_LEADER_OF_LEAGUE_OF_NATIONS
			news_event = { id = league_of_nations_news_events.6 }
		}
		if = {
			limit = {
				has_country_flag = new_leader_of_league_of_nations_becomes_major
			}
			clr_country_flag = new_leader_of_league_of_nations_becomes_major
			if = {
				limit = {
					is_major = yes
				}
				set_major = no
			}
		}
		hidden_effect = {
			clr_country_flag = leader_of_league_of_nations
			remove_ideas = league_of_nations_leader_idea
			clear_global_event_target = league_of_nations_leader
			if = {
				limit = {
					has_global_flag = league_of_nations_map_mode_active
				}
				save_cosmetic_tag_before_league_of_nations_map_mode = yes
				set_cosmetic_tag = LEAGUE_OF_NATIONS_MEMBER_CT
			}
			set_variable = { global.days_til_next_league_of_nations_election = 365 }
			every_country = {
				limit = {
					has_country_flag = won_league_of_nations_election
				}
				clr_country_flag = won_league_of_nations_election
				country_event = { id = league_of_nations_events.10 }
				add_to_variable = { num_of_won_league_of_nations_elections = 1 }
			}
			clr_global_flag = league_of_nations_election
			set_variable = { global.last_lon_election_year = global.year }
			if = {
				limit = {
					meta_trigger = {
						text = {
							date > [YEAR].11.30
						}
						YEAR = "[GetYear]"
					}
				}
				set_variable = { global.last_lon_election_month = 12 }
			}
			else_if = {
				limit = {
					meta_trigger = {
						text = {
							date > [YEAR].10.31
						}
						YEAR = "[GetYear]"
					}
				}
				set_variable = { global.last_lon_election_month = 11 }
			}
			else_if = {
				limit = {
					meta_trigger = {
						text = {
							date > [YEAR].9.30
						}
						YEAR = "[GetYear]"
					}
				}
				set_variable = { global.last_lon_election_month = 10 }
			}
			else_if = {
				limit = {
					meta_trigger = {
						text = {
							date > [YEAR].8.31
						}
						YEAR = "[GetYear]"
					}
				}
				set_variable = { global.last_lon_election_month = 9 }
			}
			else_if = {
				limit = {
					meta_trigger = {
						text = {
							date > [YEAR].7.31
						}
						YEAR = "[GetYear]"
					}
				}
				set_variable = { global.last_lon_election_month = 8 }
			}
			else_if = {
				limit = {
					meta_trigger = {
						text = {
							date > [YEAR].6.30
						}
						YEAR = "[GetYear]"
					}
				}
				set_variable = { global.last_lon_election_month = 7 }
			}
			else_if = {
				limit = {
					meta_trigger = {
						text = {
							date > [YEAR].5.31
						}
						YEAR = "[GetYear]"
					}
				}
				set_variable = { global.last_lon_election_month = 6 }
			}
			else_if = {
				limit = {
					meta_trigger = {
						text = {
							date > [YEAR].4.30
						}
						YEAR = "[GetYear]"
					}
				}
				set_variable = { global.last_lon_election_month = 5 }
			}
			else_if = {
				limit = {
					meta_trigger = {
						text = {
							date > [YEAR].3.31
						}
						YEAR = "[GetYear]"
					}
				}
				set_variable = { global.last_lon_election_month = 4 }
			}
			else_if = {
				limit = {
					meta_trigger = {
						text = {
							date > [YEAR].2.28
						}
						YEAR = "[GetYear]"
					}
				}
				set_variable = { global.last_lon_election_month = 3 }
			}
			else_if = {
				limit = {
					meta_trigger = {
						text = {
							date > [YEAR].1.31
						}
						YEAR = "[GetYear]"
					}
				}
				set_variable = { global.last_lon_election_month = 2 }
			}
			else_if = {
				limit = {
					always = yes
				}
				set_variable = { global.last_lon_election_month = 1 }
			}
		}
	}
}

# New Leader elected
country_event = {
	id = league_of_nations_events.10
	title = league_of_nations_events.EVTNAME10
	desc = league_of_nations_events.EVTDESC10
	picture = GFX_lon_event_picture
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			set_country_flag = leader_of_league_of_nations
			save_global_event_target_as = league_of_nations_leader
			add_ideas = league_of_nations_leader_idea
			if = {
				limit = {
					is_major = no
				}
				set_country_flag = new_leader_of_league_of_nations_becomes_major
			}
			if = {
				limit = {
					has_global_flag = league_of_nations_map_mode_active
				}
				save_cosmetic_tag_before_league_of_nations_map_mode = yes
				set_cosmetic_tag = LEAGUE_OF_NATIONS_LEADER_CT
			}
		}
	}
	
	option = {
		name = league_of_nations_events10.EVTOPT1
		
		ai_chance = { factor = 100 }
		
		if = {
			limit = {
				has_country_flag = new_leader_of_league_of_nations_becomes_major
			}
			set_major = yes
		}
		
		custom_effect_tooltip = WE_ARE_NEW_LEADER_OF_LEAGUE_OF_NATIONS
	}
}

# FROM invited ROOT into League of Nations
country_event = {
	id = league_of_nations_events.11
	title = league_of_nations_events.EVTNAME11
	desc = league_of_nations_events.EVTDESC11
	picture = GFX_lon_event_picture
	
	is_triggered_only = yes
	
	option = {
		name = league_of_nations_events11.EVTOPT1
		
		ai_chance = {
			factor = 1
			
			modifier = {
				NOT = { has_government = democratic }
				NOT = { has_government = neutrality }
				NOT = { has_government = FROM }
				factor = 0.1
			}
			
			modifier = {
				has_government = FROM
				factor = 2
			}
			
			modifier = {
				has_opinion = {
					target = FROM
					value < -50
				}
				factor = 0.25
			}
			
			modifier = {
				has_opinion = {
					target = FROM
					value > -49
				}
				has_opinion = {
					target = FROM
					value < 0
				}
				factor = 0.75
			}
			
			modifier = {
				has_opinion = {
					target = FROM
					value > 0
				}
				has_opinion = {
					target = FROM
					value < 50
				}
				factor = 1.25
			}
			
			modifier = {
				has_opinion = {
					target = FROM
					value > 49
				}
				has_opinion = {
					target = FROM
					value < 100
				}
				factor = 1.5
			}
			
			modifier = {
				has_opinion = {
					target = FROM
					value > 99
				}
				factor = 2
			}
			
			modifier = {
				AI_wants_to_leave_league_of_nations = yes
				factor = 0
			}
		}
		
		custom_effect_tooltip = THIS_JOIN_LEAGUE_OF_NATIONS
		hidden_effect = {
			join_league_of_nations_effect = yes
			news_event = { id = league_of_nations_news_events.19 }
			FROM = {
				news_event = { id = league_of_nations_news_events.8 }
			}
			clr_global_flag = league_of_nations_country_may_join
		}
	}
	
	option = {
		name = league_of_nations_events11.EVTOPT2
		
		ai_chance = {
			factor = 1
			
			modifier = {
				OR = {
					has_government = fascism
					has_government = communism
				}
				NOT = { has_government = FROM }
				factor = 5
			}
			
			modifier = {
				has_opinion = {
					target = FROM
					value < -50
				}
				factor = 3
			}
			
			modifier = {
				has_opinion = {
					target = FROM
					value > -49
				}
				has_opinion = {
					target = FROM
					value < 0
				}
				factor = 2
			}
			
			modifier = {
				OR = {
					tag = USA
					AND = {
						tag = GER
						has_government = fascism
					}
				}
				add = 10
			}
			
			modifier = {
				AI_wants_to_leave_league_of_nations = yes
				factor = 1000
			}
		}
		
		custom_effect_tooltip = THIS_DOES_NOT_JOIN_LEAGUE_OF_NATIONS
		hidden_effect = {
			FROM = { news_event = { id = league_of_nations_news_events.9 } }
			set_variable = { cooldown_join_league_of_nations = 365 }
			clr_global_flag = league_of_nations_country_may_join
		}
	}
}

# league_of_nations_events.12 deleted
# league_of_nations_events.13 deleted
# league_of_nations_events.14 deleted
# league_of_nations_events.15 deleted

# Historical voting: Italian attack of Ethopia
country_event = {
	id = league_of_nations_events.16
	title = league_of_nations_events.EVTNAME16
	desc = league_of_nations_events.EVTDESC16
	picture = GFX_lon_event_picture
	
	hidden = yes
	fire_only_once = yes
	is_triggered_only = yes
	
	trigger = {
		tag = ETH
	}
	
	immediate = {
		hidden_effect = {
			ITA = {
				country_event = { id = league_of_nations_events.2 }
				news_event = { id = league_of_nations_news_events.7 }
			}
			set_country_flag = started_league_of_nations_voting
			set_global_flag = ITA_ETH_voting
		}
	}
	
	option = {
		name = league_of_nations_events16.EVTOPT1
		
		ai_chance = { factor = 100 }
	}
}

# Historical voting: German Anschluss of Austria
country_event = {
	id = league_of_nations_events.17
	title = league_of_nations_events.EVTNAME17
	desc = league_of_nations_events.EVTDESC17
	picture = GFX_lon_event_picture
	
	hidden = yes
	is_triggered_only = yes
	
	trigger = {
		tag = MEX
		NOT = { has_global_flag = GER_anschluss_voting_happened }
	}
	
	immediate = {
		hidden_effect = {
			if = {
				limit = {
					NOT = { has_global_flag = league_of_nations_voting }
					NOT = { has_global_flag = league_of_nations_election }
					OR = {
						check_variable = { global.days_til_next_league_of_nations_election > 70 }
						has_global_flag = league_of_nations_focus_6_completed
					}
				}
				GER = {
					country_event = { id = league_of_nations_events.2 }
					news_event = { id = league_of_nations_news_events.7 }
				}
				set_country_flag = started_league_of_nations_voting
				set_global_flag = GER_anschluss_voting
				set_global_flag = GER_anschluss_voting_happened
				clr_global_flag = GER_anschluss_voting_in_queue
				clr_global_flag = GER_anschluss_voting_started
			}
			else_if = {
				limit = {
					always = yes
				}
				set_global_flag = GER_anschluss_voting_in_queue
			}
		}
	}
	
	option = {
		name = league_of_nations_events17.EVTOPT1
		
		ai_chance = { factor = 100 }
	}
}

# Voting successful: Release Austria or accept sanctions?
country_event = {
	id = league_of_nations_events.18
	title = league_of_nations_events.EVTNAME18
	desc = league_of_nations_events.EVTDESC18
	picture = GFX_lon_event_picture
	
	fire_only_once = yes
	is_triggered_only = yes
	
	option = {
		name = league_of_nations_events18.EVTOPT1
		
		ai_chance = {
			factor = 0.9
			
			modifier = {
				is_historical_focus_on = yes
				add = 0.1
			}
		}
		
		if = {
			limit = {
				has_country_flag = GER_anschluss_voting_war
			}
			every_country = {
				limit = {
					has_country_flag = member_of_league_of_nations
				}
				create_wargoal = {
					type = liberate_wargoal
					target = ROOT
				}
			}
		}
		else_if = {
			limit = {
				has_country_flag = GER_anschluss_voting_kick
			}
			country_event = { id = league_of_nations_events.3 tooltip = THIS_IS_KICKED_FROM_LEAGUE_OF_NATIONS }
		}
		else_if = {
			limit = {
				has_country_flag = GER_anschluss_voting_trade
			}
			if = {
				limit = {
					check_variable = { num_of_active_league_of_nations_trade_sanctions < 1 }
				}
				add_to_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
				set_variable = { duration_of_1_league_of_nations_trade_sanction = 1095 }
				every_country = {
					limit = {
						has_country_flag = member_of_league_of_nations
						NOT = { tag = ROOT }
					}
					add_opinion_modifier = {
						target = ROOT
						modifier = league_of_nations_trade_sanction_modifier_1
					}
				}
			}
			else_if = {
				limit = {
					check_variable = { num_of_active_league_of_nations_trade_sanctions < 2 }
				}
				add_to_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
				set_variable = { duration_of_2_league_of_nations_trade_sanction = 1095 }
				every_country = {
					limit = {
						has_country_flag = member_of_league_of_nations
						NOT = { tag = ROOT }
					}
					add_opinion_modifier = {
						target = ROOT
						modifier = league_of_nations_trade_sanction_modifier_2
					}
				}
			}
			else_if = {
				limit = {
					check_variable = { num_of_active_league_of_nations_trade_sanctions < 3 }
				}
				add_to_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
				set_variable = { duration_of_3_league_of_nations_trade_sanction = 1095 }
				every_country = {
					limit = {
						has_country_flag = member_of_league_of_nations
						NOT = { tag = ROOT }
					}
					add_opinion_modifier = {
						target = ROOT
						modifier = league_of_nations_trade_sanction_modifier_3
					}
				}
			}
			else_if = {
				limit = {
					check_variable = { num_of_active_league_of_nations_trade_sanctions < 4 }
				}
				add_to_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
				set_variable = { duration_of_4_league_of_nations_trade_sanction = 1095 }
				every_country = {
					limit = {
						has_country_flag = member_of_league_of_nations
						NOT = { tag = ROOT }
					}
					add_opinion_modifier = {
						target = ROOT
						modifier = league_of_nations_trade_sanction_modifier_4
					}
				}
			}
			else_if = {
				limit = {
					check_variable = { num_of_active_league_of_nations_trade_sanctions < 5 }
				}
				add_to_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
				set_variable = { duration_of_5_league_of_nations_trade_sanction = 1095 }
				every_country = {
					limit = {
						has_country_flag = member_of_league_of_nations
						NOT = { tag = ROOT }
					}
					add_opinion_modifier = {
						target = ROOT
						modifier = league_of_nations_trade_sanction_modifier_5
					}
				}
			}
			else_if = {
				limit = {
					check_variable = { num_of_active_league_of_nations_trade_sanctions < 6 }
				}
				add_to_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
				set_variable = { duration_of_6_league_of_nations_trade_sanction = 1095 }
				every_country = {
					limit = {
						has_country_flag = member_of_league_of_nations
						NOT = { tag = ROOT }
					}
					add_opinion_modifier = {
						target = ROOT
						modifier = league_of_nations_trade_sanction_modifier_6
					}
				}
			}
			else_if = {
				limit = {
					check_variable = { num_of_active_league_of_nations_trade_sanctions < 7 }
				}
				add_to_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
				set_variable = { duration_of_7_league_of_nations_trade_sanction = 1095 }
				every_country = {
					limit = {
						has_country_flag = member_of_league_of_nations
						NOT = { tag = ROOT }
					}
					add_opinion_modifier = {
						target = ROOT
						modifier = league_of_nations_trade_sanction_modifier_7
					}
				}
			}
			else_if = {
				limit = {
					check_variable = { num_of_active_league_of_nations_trade_sanctions < 8 }
				}
				add_to_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
				set_variable = { duration_of_8_league_of_nations_trade_sanction = 1095 }
				every_country = {
					limit = {
						has_country_flag = member_of_league_of_nations
						NOT = { tag = ROOT }
					}
					add_opinion_modifier = {
						target = ROOT
						modifier = league_of_nations_trade_sanction_modifier_8
					}
				}
			}
			else_if = {
				limit = {
					check_variable = { num_of_active_league_of_nations_trade_sanctions < 9 }
				}
				add_to_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
				set_variable = { duration_of_9_league_of_nations_trade_sanction = 1095 }
				every_country = {
					limit = {
						has_country_flag = member_of_league_of_nations
						NOT = { tag = ROOT }
					}
					add_opinion_modifier = {
						target = ROOT
						modifier = league_of_nations_trade_sanction_modifier_9
					}
				}
			}
			else_if = {
				limit = {
					check_variable = { num_of_active_league_of_nations_trade_sanctions < 10 }
				}
				add_to_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
				set_variable = { duration_of_10_league_of_nations_trade_sanction = 1095 }
				every_country = {
					limit = {
						has_country_flag = member_of_league_of_nations
						NOT = { tag = ROOT }
					}
					add_opinion_modifier = {
						target = ROOT
						modifier = league_of_nations_trade_sanction_modifier_10
					}
				}
			}
		}
		else_if = {
			limit = {
				has_idea = league_of_nations_defense_pact_target
			}
			custom_effect_tooltip = ALL_LEAGUE_OF_NATIONS_FORM_COALITION_AGAINST_THIS
		}
		
		custom_effect_tooltip = THIS_GAINS_14_AGGRESSIVENESS
		
		hidden_effect = {
			set_variable = { cooldown_for_league_of_nations_voting = 100 }
			set_temp_variable = { league_of_nations_threat_from_voting_temp = 14 }
			add_to_variable = { league_of_nations_generated_threat = league_of_nations_threat_from_voting_temp }
			clr_country_flag = last_league_of_nations_threat_static_change
			set_country_flag = last_league_of_nations_threat_static_change
			set_variable = { last_league_of_nations_threat_static_change = 11 }
			sort_array_high_to_low_global_threat_countries_array = yes
			
			if = {
				limit = {
					check_variable = { league_of_nations_generated_threat > 100 }
				}
				set_variable = { league_of_nations_generated_threat = 100 }
			}
			if = {
				limit = {
					check_variable = { league_of_nations_generated_threat < 0 }
				}
				set_variable = { league_of_nations_generated_threat = 0 }
			}
		}
		
		news_event = { id = league_of_nations_news_events.13 }
		
		hidden_effect = {
			every_country = {
				clr_country_flag = league_of_nations_voted_sanction_type_trade
				clr_country_flag = league_of_nations_voted_sanction_type_war
				clr_country_flag = league_of_nations_voted_sanction_type_kick_out_of_league_of_nations
				clr_country_flag = league_of_nations_voted_sanction_type_form_coalition
				clr_country_flag = league_of_nations_voting_successful_type_coalition
				clr_country_flag = league_of_nations_voted_yes
				clr_country_flag = league_of_nations_voted_no
				clr_country_flag = target_of_league_of_nations_voting
				clr_country_flag = started_league_of_nations_voting
				clr_country_flag = GER_anschluss_voting_war
				clr_country_flag = GER_anschluss_voting_kick
				clr_country_flag = GER_anschluss_voting_trade
			}
			
			set_variable = { global.num_of_yes_votes_in_league_of_nations_voting = 0 }
			set_variable = { global.num_of_no_votes_in_league_of_nations_voting = 0 }
			set_variable = { global.num_of_trade_sanction_votes_in_league_of_nations_voting = 0 }
			set_variable = { global.num_of_war_votes_in_league_of_nations_voting = 0 }
			set_variable = { global.num_of_kick_out_of_league_of_nations_votes_in_league_of_nations_voting = 0 }
			set_variable = { global.num_of_form_coalition_votes_in_league_of_nations_voting = 0 }
			set_variable = { global.league_of_nations_voting_time = 0 }
			
			clr_global_flag = league_of_nations_voting
			clr_global_flag = ITA_ETH_voting
			clr_global_flag = SOV_FIN_voting
			clr_global_flag = GER_anschluss_voting
			clr_global_flag = league_of_nations_country_annexation_voting
			clr_global_flag = league_of_nations_state_annexation_voting
		}
	}
	
	option = {
		name = league_of_nations_events18.EVTOPT2
		
		ai_chance = {
			factor = 0
			
			modifier = {
				is_historical_focus_on = no
				add = 0.1
			}
		}
		
		release = AUS
		every_country = {
			add_opinion_modifier = {
				target = ROOT
				modifier = league_of_nations_GER_released_AUS
			}
		}
		
		news_event = { id = league_of_nations_news_events.12 }
		
		hidden_effect = {
			set_variable = { cooldown_for_league_of_nations_voting = 50 }
			if = {
				limit = {
					has_idea = league_of_nations_defense_pact_target
				}
				remove_ideas = league_of_nations_defense_pact_target
			}
			every_country = {
				clr_country_flag = league_of_nations_voted_sanction_type_trade
				clr_country_flag = league_of_nations_voted_sanction_type_war
				clr_country_flag = league_of_nations_voted_sanction_type_kick_out_of_league_of_nations
				clr_country_flag = league_of_nations_voted_sanction_type_form_coalition
				clr_country_flag = league_of_nations_voting_successful_type_coalition
				clr_country_flag = league_of_nations_voted_yes
				clr_country_flag = league_of_nations_voted_no
				clr_country_flag = target_of_league_of_nations_voting
				clr_country_flag = started_league_of_nations_voting
				clr_country_flag = GER_anschluss_voting_war
				clr_country_flag = GER_anschluss_voting_kick
				clr_country_flag = GER_anschluss_voting_trade
			}
			
			set_variable = { global.num_of_yes_votes_in_league_of_nations_voting = 0 }
			set_variable = { global.num_of_no_votes_in_league_of_nations_voting = 0 }
			set_variable = { global.num_of_trade_sanction_votes_in_league_of_nations_voting = 0 }
			set_variable = { global.num_of_war_votes_in_league_of_nations_voting = 0 }
			set_variable = { global.num_of_kick_out_of_league_of_nations_votes_in_league_of_nations_voting = 0 }
			set_variable = { global.num_of_form_coalition_votes_in_league_of_nations_voting = 0 }
			set_variable = { global.league_of_nations_voting_time = 0 }
			
			clr_global_flag = league_of_nations_voting
			clr_global_flag = ITA_ETH_voting
			clr_global_flag = SOV_FIN_voting
			clr_global_flag = GER_anschluss_voting
			clr_global_flag = league_of_nations_country_annexation_voting
			clr_global_flag = league_of_nations_state_annexation_voting
		}
	}
}

# Historical voting: Soviet attack of Finland
country_event = {
	id = league_of_nations_events.19
	title = league_of_nations_events.EVTNAME19
	desc = league_of_nations_events.EVTDESC19
	picture = GFX_lon_event_picture
	
	hidden = yes
	is_triggered_only = yes
	
	trigger = {
		tag = FIN
		NOT = { has_global_flag = SOV_FIN_voting_happened }
	}
	
	immediate = {
		hidden_effect = {
			if = {
				limit = {
					NOT = { has_global_flag = league_of_nations_voting }
					NOT = { has_global_flag = league_of_nations_election }
					OR = {
						check_variable = { global.days_til_next_league_of_nations_election > 70 }
						has_global_flag = league_of_nations_focus_6_completed
					}
					NOT = { has_global_flag = GER_anschluss_voting_started }
					NOT = { has_global_flag = GER_anschluss_voting_in_queue }
				}
				if = {
					limit = {
						NOT = { is_puppet_of = SOV }
					}
					SOV = {
						country_event = { id = league_of_nations_events.2 }
						news_event = { id = league_of_nations_news_events.7 }
					}
					set_country_flag = started_league_of_nations_voting
					set_global_flag = SOV_FIN_voting
				}
				set_global_flag = SOV_FIN_voting_happened
				clr_global_flag = SOV_FIN_voting_triggered
				clr_global_flag = SOV_FIN_voting_started
			}
			else_if = {
				limit = {
					always = yes
				}
				set_global_flag = SOV_FIN_voting_triggered
			}
		}
	}
	
	option = {
		name = league_of_nations_events19.EVTOPT1
		
		ai_chance = { factor = 100 }
	}
}

# Left League of Nations, cancel trade sanctions?
country_event = {
	id = league_of_nations_events.20
	title = league_of_nations_events.EVTNAME20
	desc = league_of_nations_events.EVTDESC20
	picture = GFX_lon_event_picture
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			set_variable = { num_of_countries_we_have_trade_sanctions_against = 0 }
			every_country = {
				limit = {
					check_variable = { num_of_active_league_of_nations_trade_sanctions > 0 }
				}
				ROOT = {
					add_to_variable = { num_of_countries_we_have_trade_sanctions_against = 1 }
				}
			}
		}
	}
	
	option = {
		name = league_of_nations_events20.EVTOPT1
		
		ai_chance = { factor = 0.75 }
		
		every_country = {
			limit = {
				check_variable = { num_of_active_league_of_nations_trade_sanctions > 0 }
			}
			ROOT = {
				if = {
					limit = {
						has_opinion_modifier = league_of_nations_trade_sanction_modifier_1
					}
					remove_opinion_modifier = {
						target = PREV
						modifier = league_of_nations_trade_sanction_modifier_1
					}
				}
				if = {
					limit = {
						has_opinion_modifier = league_of_nations_trade_sanction_modifier_2
					}
					remove_opinion_modifier = {
						target = PREV
						modifier = league_of_nations_trade_sanction_modifier_2
					}
				}
				if = {
					limit = {
						has_opinion_modifier = league_of_nations_trade_sanction_modifier_3
					}
					remove_opinion_modifier = {
						target = PREV
						modifier = league_of_nations_trade_sanction_modifier_3
					}
				}
				if = {
					limit = {
						has_opinion_modifier = league_of_nations_trade_sanction_modifier_4
					}
					remove_opinion_modifier = {
						target = PREV
						modifier = league_of_nations_trade_sanction_modifier_4
					}
				}
				if = {
					limit = {
						has_opinion_modifier = league_of_nations_trade_sanction_modifier_5
					}
					remove_opinion_modifier = {
						target = PREV
						modifier = league_of_nations_trade_sanction_modifier_5
					}
				}
				if = {
					limit = {
						has_opinion_modifier = league_of_nations_trade_sanction_modifier_6
					}
					remove_opinion_modifier = {
						target = PREV
						modifier = league_of_nations_trade_sanction_modifier_6
					}
				}
				if = {
					limit = {
						has_opinion_modifier = league_of_nations_trade_sanction_modifier_7
					}
					remove_opinion_modifier = {
						target = PREV
						modifier = league_of_nations_trade_sanction_modifier_7
					}
				}
				if = {
					limit = {
						has_opinion_modifier = league_of_nations_trade_sanction_modifier_8
					}
					remove_opinion_modifier = {
						target = PREV
						modifier = league_of_nations_trade_sanction_modifier_8
					}
				}
				if = {
					limit = {
						has_opinion_modifier = league_of_nations_trade_sanction_modifier_9
					}
					remove_opinion_modifier = {
						target = PREV
						modifier = league_of_nations_trade_sanction_modifier_9
					}
				}
				if = {
					limit = {
						has_opinion_modifier = league_of_nations_trade_sanction_modifier_10
					}
					remove_opinion_modifier = {
						target = PREV
						modifier = league_of_nations_trade_sanction_modifier_10
					}
				}
			}
		}
	}
	
	option = {
		name = league_of_nations_events20.EVTOPT2
		
		ai_chance = { factor = 0.25 }
		
		every_country = {
			limit = {
				check_variable = { num_of_active_league_of_nations_trade_sanctions > 0 }
			}
			add_opinion_modifier = {
				target = ROOT
				modifier = did_not_cancel_league_of_nations_trade_sanctions
			}
		}
	}
}

# Voting successful: Release country/give back states or accept sanctions?
country_event = {
	id = league_of_nations_events.21
	title = league_of_nations_events.EVTNAME21
	desc = league_of_nations_events.EVTDESC21
	picture = GFX_lon_event_picture
	
	is_triggered_only = yes
	
	option = {
		name = league_of_nations_events21.EVTOPT1
		
		ai_chance = {
			factor = 0
			
			modifier = {
				has_government = democratic
				add = 0.25
			}
			modifier = {
				has_government = neutrality
				add = 0.5
			}
			modifier = {
				NOT = { has_government = democratic }
				NOT = { has_government = neutrality }
				add = 1
			}
		}
		
		if = {
			limit = {
				has_country_flag = league_of_nations_voting_war
			}
			every_country = {
				limit = {
					has_country_flag = member_of_league_of_nations
				}
				create_wargoal = {
					type = liberate_wargoal
					target = ROOT
				}
			}
		}
		else_if = {
			limit = {
				has_country_flag = league_of_nations_voting_kick
			}
			country_event = { id = league_of_nations_events.3 tooltip = THIS_IS_KICKED_FROM_LEAGUE_OF_NATIONS }
		}
		else_if = {
			limit = {
				has_country_flag = league_of_nations_voting_trade
			}
			if = {
				limit = {
					check_variable = { num_of_active_league_of_nations_trade_sanctions < 1 }
				}
				add_to_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
				set_variable = { duration_of_1_league_of_nations_trade_sanction = 1095 }
				every_country = {
					limit = {
						has_country_flag = member_of_league_of_nations
						NOT = { tag = ROOT }
					}
					add_opinion_modifier = {
						target = ROOT
						modifier = league_of_nations_trade_sanction_modifier_1
					}
				}
			}
			else_if = {
				limit = {
					check_variable = { num_of_active_league_of_nations_trade_sanctions < 2 }
				}
				add_to_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
				set_variable = { duration_of_2_league_of_nations_trade_sanction = 1095 }
				every_country = {
					limit = {
						has_country_flag = member_of_league_of_nations
						NOT = { tag = ROOT }
					}
					add_opinion_modifier = {
						target = ROOT
						modifier = league_of_nations_trade_sanction_modifier_2
					}
				}
			}
			else_if = {
				limit = {
					check_variable = { num_of_active_league_of_nations_trade_sanctions < 3 }
				}
				add_to_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
				set_variable = { duration_of_3_league_of_nations_trade_sanction = 1095 }
				every_country = {
					limit = {
						has_country_flag = member_of_league_of_nations
						NOT = { tag = ROOT }
					}
					add_opinion_modifier = {
						target = ROOT
						modifier = league_of_nations_trade_sanction_modifier_3
					}
				}
			}
			else_if = {
				limit = {
					check_variable = { num_of_active_league_of_nations_trade_sanctions < 4 }
				}
				add_to_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
				set_variable = { duration_of_4_league_of_nations_trade_sanction = 1095 }
				every_country = {
					limit = {
						has_country_flag = member_of_league_of_nations
						NOT = { tag = ROOT }
					}
					add_opinion_modifier = {
						target = ROOT
						modifier = league_of_nations_trade_sanction_modifier_4
					}
				}
			}
			else_if = {
				limit = {
					check_variable = { num_of_active_league_of_nations_trade_sanctions < 5 }
				}
				add_to_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
				set_variable = { duration_of_5_league_of_nations_trade_sanction = 1095 }
				every_country = {
					limit = {
						has_country_flag = member_of_league_of_nations
						NOT = { tag = ROOT }
					}
					add_opinion_modifier = {
						target = ROOT
						modifier = league_of_nations_trade_sanction_modifier_5
					}
				}
			}
			else_if = {
				limit = {
					check_variable = { num_of_active_league_of_nations_trade_sanctions < 6 }
				}
				add_to_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
				set_variable = { duration_of_6_league_of_nations_trade_sanction = 1095 }
				every_country = {
					limit = {
						has_country_flag = member_of_league_of_nations
						NOT = { tag = ROOT }
					}
					add_opinion_modifier = {
						target = ROOT
						modifier = league_of_nations_trade_sanction_modifier_6
					}
				}
			}
			else_if = {
				limit = {
					check_variable = { num_of_active_league_of_nations_trade_sanctions < 7 }
				}
				add_to_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
				set_variable = { duration_of_7_league_of_nations_trade_sanction = 1095 }
				every_country = {
					limit = {
						has_country_flag = member_of_league_of_nations
						NOT = { tag = ROOT }
					}
					add_opinion_modifier = {
						target = ROOT
						modifier = league_of_nations_trade_sanction_modifier_7
					}
				}
			}
			else_if = {
				limit = {
					check_variable = { num_of_active_league_of_nations_trade_sanctions < 8 }
				}
				add_to_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
				set_variable = { duration_of_8_league_of_nations_trade_sanction = 1095 }
				every_country = {
					limit = {
						has_country_flag = member_of_league_of_nations
						NOT = { tag = ROOT }
					}
					add_opinion_modifier = {
						target = ROOT
						modifier = league_of_nations_trade_sanction_modifier_8
					}
				}
			}
			else_if = {
				limit = {
					check_variable = { num_of_active_league_of_nations_trade_sanctions < 9 }
				}
				add_to_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
				set_variable = { duration_of_9_league_of_nations_trade_sanction = 1095 }
				every_country = {
					limit = {
						has_country_flag = member_of_league_of_nations
						NOT = { tag = ROOT }
					}
					add_opinion_modifier = {
						target = ROOT
						modifier = league_of_nations_trade_sanction_modifier_9
					}
				}
			}
			else_if = {
				limit = {
					check_variable = { num_of_active_league_of_nations_trade_sanctions < 10 }
				}
				add_to_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
				set_variable = { duration_of_10_league_of_nations_trade_sanction = 1095 }
				every_country = {
					limit = {
						has_country_flag = member_of_league_of_nations
						NOT = { tag = ROOT }
					}
					add_opinion_modifier = {
						target = ROOT
						modifier = league_of_nations_trade_sanction_modifier_10
					}
				}
			}
		}
		else_if = {
			limit = {
				has_idea = league_of_nations_defense_pact_target
			}
			custom_effect_tooltip = ALL_LEAGUE_OF_NATIONS_FORM_COALITION_AGAINST_THIS
		}
		
		custom_effect_tooltip = THIS_GAINS_14_AGGRESSIVENESS
		
		hidden_effect = {
			set_variable = { cooldown_for_league_of_nations_voting = 100 }
			set_temp_variable = { league_of_nations_threat_from_voting_temp = 14 }
			add_to_variable = { league_of_nations_generated_threat = league_of_nations_threat_from_voting_temp }
			clr_country_flag = last_league_of_nations_threat_static_change
			set_country_flag = last_league_of_nations_threat_static_change
			set_variable = { last_league_of_nations_threat_static_change = 11 }
			sort_array_high_to_low_global_threat_countries_array = yes
			
			if = {
				limit = {
					check_variable = { league_of_nations_generated_threat > 100 }
				}
				set_variable = { league_of_nations_generated_threat = 100 }
			}
			if = {
				limit = {
					check_variable = { league_of_nations_generated_threat < 0 }
				}
				set_variable = { league_of_nations_generated_threat = 0 }
			}
		}
		
		news_event = { id = league_of_nations_news_events.23 }
		
		hidden_effect = {
			every_country = {
				clr_country_flag = league_of_nations_voted_sanction_type_trade
				clr_country_flag = league_of_nations_voted_sanction_type_war
				clr_country_flag = league_of_nations_voted_sanction_type_kick_out_of_league_of_nations
				clr_country_flag = league_of_nations_voted_sanction_type_form_coalition
				clr_country_flag = league_of_nations_voting_successful_type_coalition
				clr_country_flag = league_of_nations_voted_yes
				clr_country_flag = league_of_nations_voted_no
				clr_country_flag = target_of_league_of_nations_voting
				clr_country_flag = started_league_of_nations_voting
				clr_country_flag = league_of_nations_voting_war
				clr_country_flag = league_of_nations_voting_kick
				clr_country_flag = league_of_nations_voting_trade
			}
			
			set_variable = { global.num_of_yes_votes_in_league_of_nations_voting = 0 }
			set_variable = { global.num_of_no_votes_in_league_of_nations_voting = 0 }
			set_variable = { global.num_of_trade_sanction_votes_in_league_of_nations_voting = 0 }
			set_variable = { global.num_of_war_votes_in_league_of_nations_voting = 0 }
			set_variable = { global.num_of_kick_out_of_league_of_nations_votes_in_league_of_nations_voting = 0 }
			set_variable = { global.num_of_form_coalition_votes_in_league_of_nations_voting = 0 }
			set_variable = { global.league_of_nations_voting_time = 0 }
			
			clr_global_flag = league_of_nations_voting
			clr_global_flag = ITA_ETH_voting
			clr_global_flag = SOV_FIN_voting
			clr_global_flag = GER_anschluss_voting
			clr_global_flag = league_of_nations_country_annexation_voting
			clr_global_flag = league_of_nations_state_annexation_voting
		}
	}
	
	option = {
		name = league_of_nations_events21.EVTOPT2
		
		trigger = {
			has_global_flag = league_of_nations_country_annexation_voting
		}
		
		ai_chance = {
			factor = 0
			
			modifier = {
				has_government = democratic
				add = 0.75
			}
			modifier = {
				has_government = neutrality
				add = 0.5
			}
		}
		
		var:last_annexed_country = {
			ROOT = { release = PREV }
		}
		every_country = {
			add_opinion_modifier = {
				target = ROOT
				modifier = league_of_nations_accepted_ultimatum
			}
		}
		
		news_event = { id = league_of_nations_news_events.24 }
		
		hidden_effect = {
			set_variable = { cooldown_for_league_of_nations_voting = 50 }
			if = {
				limit = {
					has_idea = league_of_nations_defense_pact_target
				}
				remove_ideas = league_of_nations_defense_pact_target
			}
			every_country = {
				clr_country_flag = league_of_nations_voted_sanction_type_trade
				clr_country_flag = league_of_nations_voted_sanction_type_war
				clr_country_flag = league_of_nations_voted_sanction_type_kick_out_of_league_of_nations
				clr_country_flag = league_of_nations_voted_sanction_type_form_coalition
				clr_country_flag = league_of_nations_voting_successful_type_coalition
				clr_country_flag = league_of_nations_voted_yes
				clr_country_flag = league_of_nations_voted_no
				clr_country_flag = target_of_league_of_nations_voting
				clr_country_flag = started_league_of_nations_voting
				clr_country_flag = GER_anschluss_voting_war
				clr_country_flag = GER_anschluss_voting_kick
				clr_country_flag = GER_anschluss_voting_trade
			}
			clear_variable = last_annexed_country
			every_state = {
				clr_state_flag = states_to_give_back
			}
			
			set_variable = { global.num_of_yes_votes_in_league_of_nations_voting = 0 }
			set_variable = { global.num_of_no_votes_in_league_of_nations_voting = 0 }
			set_variable = { global.num_of_trade_sanction_votes_in_league_of_nations_voting = 0 }
			set_variable = { global.num_of_war_votes_in_league_of_nations_voting = 0 }
			set_variable = { global.num_of_kick_out_of_league_of_nations_votes_in_league_of_nations_voting = 0 }
			set_variable = { global.num_of_form_coalition_votes_in_league_of_nations_voting = 0 }
			set_variable = { global.league_of_nations_voting_time = 0 }
			
			clr_global_flag = league_of_nations_voting
			clr_global_flag = ITA_ETH_voting
			clr_global_flag = SOV_FIN_voting
			clr_global_flag = GER_anschluss_voting
			clr_global_flag = league_of_nations_country_annexation_voting
			clr_global_flag = league_of_nations_state_annexation_voting
		}
	}
	
	option = {
		name = league_of_nations_events21.EVTOPT3
		
		trigger = {
			has_global_flag = league_of_nations_state_annexation_voting
		}
		
		ai_chance = {
			factor = 0
			
			modifier = {
				has_government = democratic
				add = 0.75
			}
			modifier = {
				has_government = neutrality
				add = 0.5
			}
		}
		
		every_owned_state = {
			limit = {
				has_state_flag = states_to_give_back
			}
			var:previous_owner = {
				set_state_owner = PREV
				set_state_controller = PREV
			}
			clr_state_flag = annexed_by_@ROOT
		}
		every_country = {
			add_opinion_modifier = {
				target = ROOT
				modifier = league_of_nations_accepted_ultimatum
			}
		}
		
		news_event = { id = league_of_nations_news_events.25 }
		
		hidden_effect = {
			if = {
				limit = {
					has_idea = league_of_nations_defense_pact_target
				}
				remove_ideas = league_of_nations_defense_pact_target
			}
			every_country = {
				clr_country_flag = league_of_nations_voted_sanction_type_trade
				clr_country_flag = league_of_nations_voted_sanction_type_war
				clr_country_flag = league_of_nations_voted_sanction_type_kick_out_of_league_of_nations
				clr_country_flag = league_of_nations_voted_sanction_type_form_coalition
				clr_country_flag = league_of_nations_voting_successful_type_coalition
				clr_country_flag = league_of_nations_voted_yes
				clr_country_flag = league_of_nations_voted_no
				clr_country_flag = target_of_league_of_nations_voting
				clr_country_flag = started_league_of_nations_voting
				clr_country_flag = GER_anschluss_voting_war
				clr_country_flag = GER_anschluss_voting_kick
				clr_country_flag = GER_anschluss_voting_trade
			}
			clear_variable = last_annexed_country
			every_state = {
				clr_state_flag = states_to_give_back
			}
			
			set_variable = { global.num_of_yes_votes_in_league_of_nations_voting = 0 }
			set_variable = { global.num_of_no_votes_in_league_of_nations_voting = 0 }
			set_variable = { global.num_of_trade_sanction_votes_in_league_of_nations_voting = 0 }
			set_variable = { global.num_of_war_votes_in_league_of_nations_voting = 0 }
			set_variable = { global.num_of_kick_out_of_league_of_nations_votes_in_league_of_nations_voting = 0 }
			set_variable = { global.num_of_form_coalition_votes_in_league_of_nations_voting = 0 }
			set_variable = { global.league_of_nations_voting_time = 0 }
			
			clr_global_flag = league_of_nations_voting
			clr_global_flag = ITA_ETH_voting
			clr_global_flag = SOV_FIN_voting
			clr_global_flag = GER_anschluss_voting
			clr_global_flag = league_of_nations_country_annexation_voting
			clr_global_flag = league_of_nations_state_annexation_voting
		}
	}
}

# Increase Aggressiveness after joining a war
country_event = {
	id = league_of_nations_events.22
	title = league_of_nations_events.EVTNAME22
	desc = league_of_nations_events.EVTDESC22
	picture = GFX_lon_event_picture
	
	hidden = yes
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			if = {
				limit = {
					any_country = {
						has_country_flag = could_be_called_against_this_@ROOT
						has_war_with = ROOT
					}
				}				
				set_temp_variable = { league_of_nations_threat_from_declare_war_temp = 10 }
				add_to_variable = { league_of_nations_generated_threat = league_of_nations_threat_from_declare_war_temp }
				if = {
					limit = {
						check_variable = { league_of_nations_generated_threat > 100 }
					}
					set_variable = { league_of_nations_generated_threat = 100 }
				}
				if = {
					limit = {
						check_variable = { league_of_nations_generated_threat < 0 }
					}
					set_variable = { league_of_nations_generated_threat = 0 }
				}
				clr_country_flag = last_league_of_nations_threat_static_change
				set_country_flag = last_league_of_nations_threat_static_change
				set_variable = { last_league_of_nations_threat_static_change = 1 }
				sort_array_high_to_low_global_threat_countries_array = yes
			}
			
			every_country = {
				limit = {
					has_country_flag = could_be_called_against_this_@ROOT
				}
				clr_country_flag = could_be_called_against_this_@ROOT
			}
		}
	}
	
	option = {
		name = league_of_nations_events22.EVTOPT1
		
		ai_chance = { factor = 100 }
	}
}

# Voting successful: White peace with Ethiopia or accept sanctions?
country_event = {
	id = league_of_nations_events.23
	title = league_of_nations_events.EVTNAME23
	desc = league_of_nations_events.EVTDESC23
	picture = GFX_lon_event_picture
	
	fire_only_once = yes
	is_triggered_only = yes
	
	option = {
		name = league_of_nations_events23.EVTOPT1
		
		ai_chance = {
			factor = 0.9
			
			modifier = {
				is_historical_focus_on = yes
				add = 0.1
			}
		}
		
		if = {
			limit = {
				has_country_flag = ITA_ETH_voting_war
			}
			every_country = {
				limit = {
					has_country_flag = member_of_league_of_nations
				}
				create_wargoal = {
					type = liberate_wargoal
					target = ROOT
				}
			}
		}
		else_if = {
			limit = {
				has_country_flag = ITA_ETH_voting_kick
			}
			country_event = { id = league_of_nations_events.3 tooltip = THIS_IS_KICKED_FROM_LEAGUE_OF_NATIONS }
		}
		else_if = {
			limit = {
				has_country_flag = ITA_ETH_voting_trade
			}
			if = {
				limit = {
					check_variable = { num_of_active_league_of_nations_trade_sanctions < 1 }
				}
				add_to_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
				set_variable = { duration_of_1_league_of_nations_trade_sanction = 1095 }
				every_country = {
					limit = {
						has_country_flag = member_of_league_of_nations
						NOT = { tag = ROOT }
					}
					add_opinion_modifier = {
						target = ROOT
						modifier = league_of_nations_trade_sanction_modifier_1
					}
				}
			}
			else_if = {
				limit = {
					check_variable = { num_of_active_league_of_nations_trade_sanctions < 2 }
				}
				add_to_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
				set_variable = { duration_of_2_league_of_nations_trade_sanction = 1095 }
				every_country = {
					limit = {
						has_country_flag = member_of_league_of_nations
						NOT = { tag = ROOT }
					}
					add_opinion_modifier = {
						target = ROOT
						modifier = league_of_nations_trade_sanction_modifier_2
					}
				}
			}
			else_if = {
				limit = {
					check_variable = { num_of_active_league_of_nations_trade_sanctions < 3 }
				}
				add_to_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
				set_variable = { duration_of_3_league_of_nations_trade_sanction = 1095 }
				every_country = {
					limit = {
						has_country_flag = member_of_league_of_nations
						NOT = { tag = ROOT }
					}
					add_opinion_modifier = {
						target = ROOT
						modifier = league_of_nations_trade_sanction_modifier_3
					}
				}
			}
			else_if = {
				limit = {
					check_variable = { num_of_active_league_of_nations_trade_sanctions < 4 }
				}
				add_to_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
				set_variable = { duration_of_4_league_of_nations_trade_sanction = 1095 }
				every_country = {
					limit = {
						has_country_flag = member_of_league_of_nations
						NOT = { tag = ROOT }
					}
					add_opinion_modifier = {
						target = ROOT
						modifier = league_of_nations_trade_sanction_modifier_4
					}
				}
			}
			else_if = {
				limit = {
					check_variable = { num_of_active_league_of_nations_trade_sanctions < 5 }
				}
				add_to_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
				set_variable = { duration_of_5_league_of_nations_trade_sanction = 1095 }
				every_country = {
					limit = {
						has_country_flag = member_of_league_of_nations
						NOT = { tag = ROOT }
					}
					add_opinion_modifier = {
						target = ROOT
						modifier = league_of_nations_trade_sanction_modifier_5
					}
				}
			}
			else_if = {
				limit = {
					check_variable = { num_of_active_league_of_nations_trade_sanctions < 6 }
				}
				add_to_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
				set_variable = { duration_of_6_league_of_nations_trade_sanction = 1095 }
				every_country = {
					limit = {
						has_country_flag = member_of_league_of_nations
						NOT = { tag = ROOT }
					}
					add_opinion_modifier = {
						target = ROOT
						modifier = league_of_nations_trade_sanction_modifier_6
					}
				}
			}
			else_if = {
				limit = {
					check_variable = { num_of_active_league_of_nations_trade_sanctions < 7 }
				}
				add_to_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
				set_variable = { duration_of_7_league_of_nations_trade_sanction = 1095 }
				every_country = {
					limit = {
						has_country_flag = member_of_league_of_nations
						NOT = { tag = ROOT }
					}
					add_opinion_modifier = {
						target = ROOT
						modifier = league_of_nations_trade_sanction_modifier_7
					}
				}
			}
			else_if = {
				limit = {
					check_variable = { num_of_active_league_of_nations_trade_sanctions < 8 }
				}
				add_to_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
				set_variable = { duration_of_8_league_of_nations_trade_sanction = 1095 }
				every_country = {
					limit = {
						has_country_flag = member_of_league_of_nations
						NOT = { tag = ROOT }
					}
					add_opinion_modifier = {
						target = ROOT
						modifier = league_of_nations_trade_sanction_modifier_8
					}
				}
			}
			else_if = {
				limit = {
					check_variable = { num_of_active_league_of_nations_trade_sanctions < 9 }
				}
				add_to_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
				set_variable = { duration_of_9_league_of_nations_trade_sanction = 1095 }
				every_country = {
					limit = {
						has_country_flag = member_of_league_of_nations
						NOT = { tag = ROOT }
					}
					add_opinion_modifier = {
						target = ROOT
						modifier = league_of_nations_trade_sanction_modifier_9
					}
				}
			}
			else_if = {
				limit = {
					check_variable = { num_of_active_league_of_nations_trade_sanctions < 10 }
				}
				add_to_variable = { num_of_active_league_of_nations_trade_sanctions = 1 }
				set_variable = { duration_of_10_league_of_nations_trade_sanction = 1095 }
				every_country = {
					limit = {
						has_country_flag = member_of_league_of_nations
						NOT = { tag = ROOT }
					}
					add_opinion_modifier = {
						target = ROOT
						modifier = league_of_nations_trade_sanction_modifier_10
					}
				}
			}
		}
		else_if = {
			limit = {
				has_idea = league_of_nations_defense_pact_target
			}
			custom_effect_tooltip = ALL_LEAGUE_OF_NATIONS_FORM_COALITION_AGAINST_THIS
		}
		
		custom_effect_tooltip = THIS_GAINS_14_AGGRESSIVENESS
		
		hidden_effect = {
			set_variable = { cooldown_for_league_of_nations_voting = 100 }
			set_temp_variable = { league_of_nations_threat_from_voting_temp = 14 }
			add_to_variable = { league_of_nations_generated_threat = league_of_nations_threat_from_voting_temp }
			clr_country_flag = last_league_of_nations_threat_static_change
			set_country_flag = last_league_of_nations_threat_static_change
			set_variable = { last_league_of_nations_threat_static_change = 11 }
			sort_array_high_to_low_global_threat_countries_array = yes
			
			if = {
				limit = {
					check_variable = { league_of_nations_generated_threat > 100 }
				}
				set_variable = { league_of_nations_generated_threat = 100 }
			}
			if = {
				limit = {
					check_variable = { league_of_nations_generated_threat < 0 }
				}
				set_variable = { league_of_nations_generated_threat = 0 }
			}
		}
		
		news_event = { id = league_of_nations_news_events.20 }
		
		hidden_effect = {
			every_country = {
				clr_country_flag = league_of_nations_voted_sanction_type_trade
				clr_country_flag = league_of_nations_voted_sanction_type_war
				clr_country_flag = league_of_nations_voted_sanction_type_kick_out_of_league_of_nations
				clr_country_flag = league_of_nations_voted_sanction_type_form_coalition
				clr_country_flag = league_of_nations_voting_successful_type_coalition
				clr_country_flag = league_of_nations_voted_yes
				clr_country_flag = league_of_nations_voted_no
				clr_country_flag = target_of_league_of_nations_voting
				clr_country_flag = started_league_of_nations_voting
				clr_country_flag = ITA_ETH_voting_war
				clr_country_flag = ITA_ETH_voting_kick
				clr_country_flag = ITA_ETH_voting_trade
			}
			
			set_variable = { global.num_of_yes_votes_in_league_of_nations_voting = 0 }
			set_variable = { global.num_of_no_votes_in_league_of_nations_voting = 0 }
			set_variable = { global.num_of_trade_sanction_votes_in_league_of_nations_voting = 0 }
			set_variable = { global.num_of_war_votes_in_league_of_nations_voting = 0 }
			set_variable = { global.num_of_kick_out_of_league_of_nations_votes_in_league_of_nations_voting = 0 }
			set_variable = { global.num_of_form_coalition_votes_in_league_of_nations_voting = 0 }
			set_variable = { global.league_of_nations_voting_time = 0 }
			
			clr_global_flag = league_of_nations_voting
			clr_global_flag = ITA_ETH_voting
			clr_global_flag = SOV_FIN_voting
			clr_global_flag = GER_anschluss_voting
			clr_global_flag = league_of_nations_country_annexation_voting
			clr_global_flag = league_of_nations_state_annexation_voting
		}
	}
	
	option = {
		name = league_of_nations_events23.EVTOPT2
		
		trigger = {
			has_war_with = ETH
		}
		
		ai_chance = {
			factor = 0
			
			modifier = {
				is_historical_focus_on = no
				add = 0.1
			}
		}
		
		white_peace = ETH
		every_country = {
			add_opinion_modifier = {
				target = ROOT
				modifier = league_of_nations_ITA_peace_ETH
			}
		}
		
		news_event = { id = league_of_nations_news_events.21 }
		
		hidden_effect = {
			set_variable = { cooldown_for_league_of_nations_voting = 50 }
			if = {
				limit = {
					has_idea = league_of_nations_defense_pact_target
				}
				remove_ideas = league_of_nations_defense_pact_target
			}
			every_country = {
				clr_country_flag = league_of_nations_voted_sanction_type_trade
				clr_country_flag = league_of_nations_voted_sanction_type_war
				clr_country_flag = league_of_nations_voted_sanction_type_kick_out_of_league_of_nations
				clr_country_flag = league_of_nations_voted_sanction_type_form_coalition
				clr_country_flag = league_of_nations_voting_successful_type_coalition
				clr_country_flag = league_of_nations_voted_yes
				clr_country_flag = league_of_nations_voted_no
				clr_country_flag = target_of_league_of_nations_voting
				clr_country_flag = started_league_of_nations_voting
				clr_country_flag = ITA_ETH_voting_war
				clr_country_flag = ITA_ETH_voting_kick
				clr_country_flag = ITA_ETH_voting_trade
			}
			
			set_variable = { global.num_of_yes_votes_in_league_of_nations_voting = 0 }
			set_variable = { global.num_of_no_votes_in_league_of_nations_voting = 0 }
			set_variable = { global.num_of_trade_sanction_votes_in_league_of_nations_voting = 0 }
			set_variable = { global.num_of_war_votes_in_league_of_nations_voting = 0 }
			set_variable = { global.num_of_kick_out_of_league_of_nations_votes_in_league_of_nations_voting = 0 }
			set_variable = { global.num_of_form_coalition_votes_in_league_of_nations_voting = 0 }
			set_variable = { global.league_of_nations_voting_time = 0 }
			
			clr_global_flag = league_of_nations_voting
			clr_global_flag = ITA_ETH_voting
			clr_global_flag = SOV_FIN_voting
			clr_global_flag = GER_anschluss_voting
			clr_global_flag = league_of_nations_country_annexation_voting
			clr_global_flag = league_of_nations_state_annexation_voting
		}
	}
}

# Trigger call to arms of members of League of Nations
country_event = {
	id = league_of_nations_events.24
	title = league_of_nations_events.EVTNAME24
	desc = league_of_nations_events.EVTDESC24
	picture = GFX_lon_event_picture

	hidden = yes
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			every_other_country = {
				limit = {
					has_country_flag = member_of_league_of_nations
					NOT = { has_war_with = FROM }
				}
				country_event = { id = league_of_nations_events.25 hours = 3 }
			}
		}
	}
	
	option = {
		name = league_of_nations_events24.EVTOPT1
		
		ai_chance = { factor = 100 }
	}
}

# [From.GetName] Calls League of Nations Members to War
country_event = {
	id = league_of_nations_events.25
	title = league_of_nations_events.EVTNAME25
	desc = league_of_nations_events.EVTDESC25
	picture = GFX_report_event_soviet_tanks
	picture = GFX_lon_event_picture

	is_triggered_only = yes
	
	option = {
		name = league_of_nations_events25.EVTOPT1
		
		ai_chance = {
			factor = 1
			
			modifier = {
				FROM.FROM = {
					OR = {
						is_in_faction_with = ROOT
						AND = {
							has_government = ROOT
							has_opinion = {
								target = ROOT
								value > 0
							}
						}
					}
				}
				factor = 0
			}
		}
		
		add_to_war = {
			targeted_alliance = FROM
			enemy = FROM.FROM
			hostility_reason = ally
		}
	}

	option = {
		name = league_of_nations_events25.EVTOPT2

		ai_chance = {
			factor = 0
			
			modifier = {
				FROM.FROM = {
					OR = {
						is_in_faction_with = ROOT
						AND = {
							has_government = ROOT
							has_opinion = {
								target = ROOT
								value > 0
							}
						}
					}
				}
				add = 1000
			}
		}
		
		add_stability = -0.10
	}
}

# [From.GetName] justifies war against the League of Nations
country_event = {
	id = league_of_nations_news_events.26
	title = league_of_nations_news_events.EVTNAME26
	desc = league_of_nations_news_events.EVTDESC26
	picture = GFX_lon_event_picture

	is_triggered_only = yes

	immediate = {
		#log = "Triggered for [ROOT.GetName] against [FROM.GetName]"
		set_country_flag = LON_being_attacked
	}
	
	# Initiate a LON voting against the target
	option = {
		name = league_of_nations_news_events26.EVTOPT1

		trigger = {
			NOT = { has_global_flag = league_of_nations_voting }
		}
		
		ai_chance = {
			factor = 10
			
			modifier = {
				factor = 0
				ROOT = {
					is_in_faction_with = FROM
				}
			}
		}
		
		hidden_effect = {
			if = {
				limit = {
					NOT = { has_global_flag = league_of_nations_attacked_voting }
				}
				FROM = {
					country_event = { id = league_of_nations_events.2 }
					news_event = { id = league_of_nations_news_events.7 }
				}
			}
			set_country_flag = started_league_of_nations_voting
			set_global_flag = league_of_nations_attacked_voting
		}

	}

	# Declare war on the target
	option = {
		name = league_of_nations_news_events26.EVTOPT2

		trigger = {
			NOT = { has_war_with = FROM }
		}

		ai_chance = {
			factor = 1
			
			modifier = {
				factor = 0
				ROOT = {
					is_in_faction_with = FROM
					has_government = democratic
				}
			}
			modifier = {
				factor = 2
				FROM = {
					check_variable = { league_of_nations_generated_threat > 50 }
				}
			}
			modifier = {
				factor = 3
				FROM = {
					check_variable = { league_of_nations_generated_threat > 75 }
				}
			}
		}

		declare_war_on = {
			target = FROM
			type = topple_government
		}	
	}

	# Publicly condem the action (adds threat)
	option = {
		name = league_of_nations_news_events26.EVTOPT3

		ai_chance = {
			factor = 5
		}

		custom_effect_tooltip = "Raises the attacker country aggressiveness by 2"

		FROM = {
			add_to_variable = { league_of_nations_generated_threat = 2 }
		}
	}
}


# Disband the LoN after WW2?
country_event = {
	id = league_of_nations_events.27
	title = "Dissolve the League of Nations after WW2?"
	desc = "As the current leader of the League of Nations we are tasked to decide whenever the League should be disbanded for its incapability of preventing the Second World War."
	picture = GFX_lon_event_picture

	trigger = {
		OR = {
			AND = {
				OR = {
					Second_World_War_Axis_Victory = yes
					Second_World_War_Allied_Victory = yes
				}
				NOT = { has_global_flag = league_of_nations_dissolved_question }
				NOT = { has_global_flag = league_of_nations_dissolved }
				date > 1940.1.1
				date < 1949.1.1
			}
			AND = {
				country_exists = UNA
				date > 1946.1.1
				date < 1950.1.1
				NOT = { has_global_flag = league_of_nations_dissolved_question }
				NOT = { has_global_flag = league_of_nations_dissolved }
			}
		}
	}

	mean_time_to_happen = {
		days = 30
	}

	immediate = {
		set_global_flag = ww2_over
		set_global_flag = league_of_nations_dissolved_question
	}

	# Yes
	option = {
		name = "Disband it."
		
		ai_chance = { 
			factor = 90
			modifier = {
				is_historical_focus_on = yes
				factor = 100
			}
		}

		every_country = {
			limit = {
				OR = {
					has_country_flag = leader_of_league_of_nations
					has_country_flag = member_of_league_of_nations
				}
			}
			leave_league_of_nations_effect = yes
		}
		SWI = {
			annex_country = {
				target = LON
				transfer_troops = no
			}
		}
		set_global_flag = league_of_nations_dissolved

		news_event = roncw_news.3
	}

	# No
	option = {
		name = "Keep it." 
		
		ai_chance = { 
			factor = 10
			modifier = {
				is_historical_focus_on = yes
				factor = 0
			}
		}
	}
}
